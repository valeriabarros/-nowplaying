
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>#nowplaying</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        function getTweets() {
            var obj = new XMLHttpRequest();
            obj.onreadystatechange = function () {
                if (obj.readyState === 4) {
                    var json = JSON.parse(obj.response);
                    json.statuses.forEach(element => {
                        window.twttr.widgets.createTweet(
                            element.id_str,
                            document.getElementById('container'),
                            {
                                theme: 'dark',
                                conversation: 'none',
                                
                            }
                        );
                    });
                }
            }
            obj.open('GET', '/search', true);
            obj.send('');
        }

        window.twttr = (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0],
                t = window.twttr || {};
            if (d.getElementById(id)) return t;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);

            t._e = [];
            t.ready = function (f) {
                t._e.push(f);
            };

            return t;
        }(document, "script", "twitter-wjs"));

        window.twttr.ready(getTweets);
    </script>
</head>
<body>
    <form action="/tweet" method="POST">
        <textarea id="tweet" name="tweet"></textarea>
        <input type="submit">
    </form>

    <div id="container">
    </div>
</body>
</html>


